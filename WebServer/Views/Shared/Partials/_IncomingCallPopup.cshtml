@using WebServer.ViewModels.WebServer.ViewModels
@model IncomingCallVm

@* 
  IncomingCallVm (gợi ý fields):
  - int ConversationId
  - string CallType  ("video" | "audio")
  - int MeId
  - string MeName
  - string? MePhoto
  - int PeerId
  - string PeerName
  - string? PeerPhoto
*@

<div class="vdcall_consumer_call-modal-backdrop"
     data-vdcall-popup="1"
     data-conversation-id="@Model.ConversationId"
     data-call-type="@Model.CallType"
     data-me-id="@Model.ToUserId"
     data-me-name="@Model.ToUserName"
     data-me-photo="@Model.ToUserPhoto"
     data-peer-id="@Model.FromUserId"
     data-peer-name="@Model.FromUserName"
     data-peer-photo="@Model.FromUserPhoto">

    <div class="vdcall_consumer_call-card" role="dialog" aria-modal="true" aria-label="Incoming call">
        <button class="vdcall_consumer_close-btn" type="button" title="Close" aria-label="Close">
            <svg viewBox="0 0 20 20">
                <path d="M10 8.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L5.05 3.636z" />
            </svg>
        </button>

        <div class="vdcall_consumer_incoming-label">
            Incoming @Model.CallType call
        </div>

        <div class="vdcall_consumer_avatar">
            @if (!string.IsNullOrWhiteSpace(Model.FromUserPhoto))
            {
                <img src="@Model.FromUserPhoto" alt="@Model.FromUserName" />
            }
            else
            {
                <svg width="38" height="38" viewBox="0 0 38 38" fill="none" aria-hidden="true">
                    <circle cx="19" cy="19" r="19" fill="#d8dadf" />
                    <ellipse cx="19" cy="15.5" rx="6.5" ry="6.5" fill="#b0b3b8" />
                    <ellipse cx="19" cy="28.5" rx="11.5" ry="7.5" fill="#b0b3b8" />
                </svg>
            }
        </div>

        <div class="vdcall_consumer_caller-name">
            @Model.FromUserName is<br />calling you
        </div>

        <div class="vdcall_consumer_encrypted">
            <svg viewBox="0 0 16 16" aria-hidden="true">
                <path fill="currentColor"
                      d="M5.5 8V6A2.5 2.5 0 0110.5 6v2h1.25C12.44 8 13 8.56 13 9.25v3.5C13 13.44 12.44 14 11.75 14h-7.5C3.56 14 3 13.44 3 12.75v-3.5C3 8.56 3.56 8 4.25 8H5.5zm1-2A1.5 1.5 0 008 7.5V8h2v-.5A1.5 1.5 0 008.5 6zm-2.25 4C4.11 10 4 10.11 4 10.25v2.5c0 .14.11.25.25.25h7.5c.14 0 .25-.11.25-.25v-2.5A.25.25 0 0011.75 10h-7.5z" />
            </svg>
            End-to-end encrypted
        </div>

        <div class="vdcall_consumer_actions">
            <button class="vdcall_consumer_action-btn"
                    type="button"
                    title="Decline"
                    aria-label="Decline"
                    data-action="decline">
                <span class="vdcall_consumer_action-circle vdcall_consumer_decline">
                    <svg width="27" height="27" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill="currentColor"
                              d="M6.62 10.79a15.053 15.053 0 006.59 6.59l2.2-2.2a1 1 0 011.06-.24c1.12.37 2.33.57 3.53.57a1 1 0 011 1v3.5a1 1 0 01-1 1C10.07 22 2 13.93 2 4.5A1 1 0 013 3.5H6.5a1 1 0 011 1c0 1.2.19 2.41.57 3.53a1 1 0 01-.24 1.06l-2.2 2.2z" />
                    </svg>
                </span>
                <span class="vdcall_consumer_action-label">Decline</span>
            </button>

            <button class="vdcall_consumer_action-btn"
                    type="button"
                    title="Accept"
                    aria-label="Accept"
                    data-action="accept">
                <span class="vdcall_consumer_action-circle vdcall_consumer_accept">
                    <svg width="27" height="27" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill="currentColor"
                              d="M6.62 10.79a15.053 15.053 0 006.59 6.59l2.2-2.2a1 1 0 011.06-.24c1.12.37 2.33.57 3.53.57a1 1 0 011 1v3.5a1 1 0 01-1 1C10.07 22 2 13.93 2 4.5A1 1 0 013 3.5H6.5a1 1 0 011 1c0 1.2.19 2.41.57 3.53a1 1 0 01-.24 1.06l-2.2 2.2z"
                              transform="rotate(135 12 12)" />
                    </svg>
                </span>
                <span class="vdcall_consumer_action-label">Accept</span>
            </button>
        </div>
    </div>
</div>